{{ 'section-l2l-page.css' | asset_url | stylesheet_tag }}

<div class="l2l-page color-{{ section.settings.color_scheme }}">
  <!-- Hero Section -->
  {% if section.settings.show_hero %}
  <div class="l2l-hero" style="background: {{ section.settings.hero_gradient }}">
    <div class="l2l-hero-content">
      <h1>{{ section.settings.hero_title }}</h1>
      <p>{{ section.settings.hero_subtitle }}</p>
      {% if section.settings.hero_button_text != blank %}
        <a href="{{ section.settings.hero_button_link }}" class="button">{{ section.settings.hero_button_text }}</a>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <div class="l2l-section page-width">
    <!-- Intro Section -->
    {% if section.settings.show_intro %}
    <div class="l2l-intro">
      <h2>{{ section.settings.intro_title }}</h2>
      <div class="rte">{{ section.settings.intro_content }}</div>
      {% if section.settings.intro_image %}
        <div class="l2l-image-container">
          <img src="{{ section.settings.intro_image | img_url: '1200x' }}"
               alt="{{ section.settings.intro_image.alt | escape }}"
               loading="lazy">
        </div>
      {% endif %}
    </div>
    {% endif %}

    <!-- Component Cards -->
    {% if section.blocks.size > 0 %}
    <div class="l2l-blocks-container">
      {% for block in section.blocks %}
        {% case block.type %}

          {% when 'component_card' %}
            <div class="l2l-card" {{ block.shopify_attributes }}>
              {% if block.settings.card_image %}
                <div class="l2l-card-image">
                  <img src="{{ block.settings.card_image | img_url: '600x400' }}"
                       alt="{{ block.settings.card_image.alt | escape }}"
                       loading="lazy">
                </div>
              {% endif %}
              <div class="l2l-card-content">
                {% if block.settings.icon != blank %}
                  <div class="l2l-icon">{{ block.settings.icon }}</div>
                {% endif %}
                <h3>{{ block.settings.title }}</h3>
                <p>{{ block.settings.description }}</p>
              </div>
            </div>

          {% when 'benefit_item' %}
            <div class="l2l-benefit-item" {{ block.shopify_attributes }}>
              <span class="l2l-check">✓</span>
              <span>{{ block.settings.benefit_text }}</span>
            </div>

          {% when 'installation_step' %}
            <div class="l2l-step" data-step="{{ forloop.index }}" {{ block.shopify_attributes }}>
              <h3>{{ block.settings.step_title }}</h3>
              <p>{{ block.settings.step_description }}</p>
              {% if block.settings.step_image %}
                <img src="{{ block.settings.step_image | img_url: '800x' }}"
                     alt="{{ block.settings.step_image.alt | escape }}"
                     loading="lazy">
              {% endif %}
            </div>

          {% when 'text_section' %}
            <div class="l2l-text-section" {{ block.shopify_attributes }}>
              <h2>{{ block.settings.section_title }}</h2>
              <div class="rte">{{ block.settings.section_content }}</div>
            </div>

          {% when 'image_gallery' %}
            <div class="l2l-gallery" {{ block.shopify_attributes }}>
              {% if block.settings.gallery_title != blank %}
                <h2>{{ block.settings.gallery_title }}</h2>
              {% endif %}
              <div class="l2l-gallery-grid columns-{{ block.settings.columns | default: '3' }}">
                {% for i in (1..6) %}
                  {% capture image_setting %}image_{{ i }}{% endcapture %}
                  {% if block.settings[image_setting] %}
                    <div class="l2l-gallery-item">
                      <img src="{{ block.settings[image_setting] | img_url: '800x' }}"
                           alt="{{ block.settings[image_setting].alt | escape }}"
                           loading="lazy">
                      {% capture caption_setting %}caption_{{ i }}{% endcapture %}
                      {% if block.settings[caption_setting] != blank %}
                        <div class="l2l-gallery-caption">{{ block.settings[caption_setting] }}</div>
                      {% endif %}
                    </div>
                  {% endif %}
                {% endfor %}
              </div>
            </div>

          {% when 'cta_section' %}
            <div class="l2l-cta" style="background: {{ block.settings.cta_background }}" {{ block.shopify_attributes }}>
              <h2>{{ block.settings.cta_title }}</h2>
              <p>{{ block.settings.cta_description }}</p>
              <a href="{{ block.settings.cta_button_link }}" class="l2l-button">
                {{ block.settings.cta_button_text }}
              </a>
            </div>

          {% when 'image_with_text' %}
            <div class="l2l-image-text {{ block.settings.layout }}" {{ block.shopify_attributes }}>
              <div class="l2l-image-text-media">
                {% if block.settings.image %}
                  <img src="{{ block.settings.image | img_url: '1200x' }}"
                       alt="{{ block.settings.image.alt | escape }}"
                       loading="lazy">
                {% else %}
                  <div class="l2l-image-placeholder">
                    <span>{{ block.settings.title | default: 'Add Image' }}</span>
                  </div>
                {% endif %}
              </div>
              <div class="l2l-image-text-content">
                {% if block.settings.title != blank %}
                  <h2>{{ block.settings.title }}</h2>
                {% endif %}
                <div class="rte">{{ block.settings.content }}</div>
                {% if block.settings.button_text != blank %}
                  <a href="{{ block.settings.button_link }}" class="l2l-button">
                    {{ block.settings.button_text }}
                  </a>
                {% endif %}
              </div>
            </div>

          {% when 'full_width_image' %}
            <div class="l2l-full-image" {{ block.shopify_attributes }}>
              {% if block.settings.image %}
                <img src="{{ block.settings.image | img_url: '2400x' }}"
                     alt="{{ block.settings.image.alt | escape }}"
                     loading="lazy">
                {% if block.settings.overlay_text != blank %}
                  <div class="l2l-image-overlay">
                    <h2>{{ block.settings.overlay_text }}</h2>
                  </div>
                {% endif %}
              {% endif %}
            </div>

          {% when 'custom_liquid' %}
            <div class="l2l-custom" {{ block.shopify_attributes }}>
              {{ block.settings.custom_liquid }}
            </div>

        {% endcase %}
      {% endfor %}
    </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "L2L Page Content",
  "settings": [
    {
      "type": "header",
      "content": "Hero Section"
    },
    {
      "type": "checkbox",
      "id": "show_hero",
      "label": "Show hero section",
      "default": true
    },
    {
      "type": "text",
      "id": "hero_title",
      "label": "Hero title",
      "default": "Laundry to Landscape Greywater Systems"
    },
    {
      "type": "text",
      "id": "hero_subtitle",
      "label": "Hero subtitle",
      "default": "Transform your washing machine water into a sustainable irrigation solution"
    },
    {
      "type": "text",
      "id": "hero_gradient",
      "label": "Hero gradient CSS",
      "default": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
      "info": "Enter a CSS gradient value"
    },
    {
      "type": "text",
      "id": "hero_button_text",
      "label": "Hero button text"
    },
    {
      "type": "url",
      "id": "hero_button_link",
      "label": "Hero button link"
    },
    {
      "type": "header",
      "content": "Introduction Section"
    },
    {
      "type": "checkbox",
      "id": "show_intro",
      "label": "Show introduction",
      "default": true
    },
    {
      "type": "text",
      "id": "intro_title",
      "label": "Introduction title",
      "default": "What is a Laundry to Landscape System?"
    },
    {
      "type": "richtext",
      "id": "intro_content",
      "label": "Introduction content",
      "default": "<p>A Laundry to Landscape (L2L) greywater system is one of the simplest and most affordable ways to reuse household water. It diverts washing machine water directly to your landscape without altering household plumbing.</p>"
    },
    {
      "type": "image_picker",
      "id": "intro_image",
      "label": "Introduction image"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "inverse",
          "label": "Inverse"
        }
      ],
      "default": "background-1"
    }
  ],
  "blocks": [
    {
      "type": "component_card",
      "name": "Component Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "card_image",
          "label": "Card image (optional)"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (emoji or text)",
          "default": "💧"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Component Name"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description"
        }
      ]
    },
    {
      "type": "benefit_item",
      "name": "Benefit Item",
      "settings": [
        {
          "type": "text",
          "id": "benefit_text",
          "label": "Benefit text",
          "default": "Saves water and money"
        }
      ]
    },
    {
      "type": "installation_step",
      "name": "Installation Step",
      "settings": [
        {
          "type": "text",
          "id": "step_title",
          "label": "Step title",
          "default": "Step Title"
        },
        {
          "type": "textarea",
          "id": "step_description",
          "label": "Step description"
        },
        {
          "type": "image_picker",
          "id": "step_image",
          "label": "Step image (optional)"
        }
      ]
    },
    {
      "type": "text_section",
      "name": "Text Section",
      "settings": [
        {
          "type": "text",
          "id": "section_title",
          "label": "Section title"
        },
        {
          "type": "richtext",
          "id": "section_content",
          "label": "Section content"
        }
      ]
    },
    {
      "type": "image_gallery",
      "name": "Image Gallery",
      "settings": [
        {
          "type": "text",
          "id": "gallery_title",
          "label": "Gallery title"
        },
        {
          "type": "select",
          "id": "columns",
          "label": "Images per row",
          "options": [
            { "value": "2", "label": "2 columns" },
            { "value": "3", "label": "3 columns" },
            { "value": "4", "label": "4 columns" }
          ],
          "default": "3"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image 1"
        },
        {
          "type": "text",
          "id": "caption_1",
          "label": "Caption 1"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image 2"
        },
        {
          "type": "text",
          "id": "caption_2",
          "label": "Caption 2"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image 3"
        },
        {
          "type": "text",
          "id": "caption_3",
          "label": "Caption 3"
        },
        {
          "type": "image_picker",
          "id": "image_4",
          "label": "Image 4"
        },
        {
          "type": "text",
          "id": "caption_4",
          "label": "Caption 4"
        },
        {
          "type": "image_picker",
          "id": "image_5",
          "label": "Image 5"
        },
        {
          "type": "text",
          "id": "caption_5",
          "label": "Caption 5"
        },
        {
          "type": "image_picker",
          "id": "image_6",
          "label": "Image 6"
        },
        {
          "type": "text",
          "id": "caption_6",
          "label": "Caption 6"
        }
      ]
    },
    {
      "type": "image_with_text",
      "name": "Image with Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            { "value": "image-left", "label": "Image on left" },
            { "value": "image-right", "label": "Image on right" }
          ],
          "default": "image-left"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        }
      ]
    },
    {
      "type": "full_width_image",
      "name": "Full Width Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "overlay_text",
          "label": "Overlay text (optional)"
        }
      ]
    },
    {
      "type": "cta_section",
      "name": "Call to Action",
      "settings": [
        {
          "type": "text",
          "id": "cta_title",
          "label": "CTA title",
          "default": "Ready to Get Started?"
        },
        {
          "type": "text",
          "id": "cta_description",
          "label": "CTA description"
        },
        {
          "type": "text",
          "id": "cta_button_text",
          "label": "Button text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "cta_button_link",
          "label": "Button link"
        },
        {
          "type": "text",
          "id": "cta_background",
          "label": "Background CSS",
          "default": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "Custom Liquid",
      "settings": [
        {
          "type": "liquid",
          "id": "custom_liquid",
          "label": "Custom Liquid code"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "L2L Page Content",
      "settings": {
        "show_hero": true,
        "hero_title": "Laundry to Landscape Greywater Systems",
        "hero_subtitle": "Transform your washing machine water into a sustainable irrigation solution for your garden",
        "hero_gradient": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        "show_intro": true,
        "intro_title": "What is a Laundry to Landscape System?",
        "intro_content": "<p>A Laundry to Landscape (L2L) greywater system is one of the simplest and most affordable ways to reuse household water. It diverts washing machine water directly to your landscape without altering household plumbing, using the washing machine's internal pump to distribute water throughout your yard.</p>"
      },
      "blocks": [
        {
          "type": "text_section",
          "settings": {
            "section_title": "Key Components",
            "section_content": "<p>Understanding the essential parts of your L2L system ensures proper installation and maintenance.</p>"
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🔧",
            "title": "3-Way Diverter Valve",
            "description": "Allows you to easily switch between sending water to the landscape or to the sewer/septic system. Essential for maintenance and when using bleach or harsh detergents."
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "💧",
            "title": "1-inch Tubing",
            "description": "Larger diameter tubing (1\" instead of standard ½\") prevents clogging from lint and allows for better water flow distribution throughout your landscape."
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🌱",
            "title": "Mulch Basins",
            "description": "Shallow depressions filled with wood chip mulch where greywater is released. The mulch filters the water and prevents human contact while irrigating plants."
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "⚡",
            "title": "Auto-Vent",
            "description": "Prevents vacuum lock in the system and ensures proper drainage. Installed at the highest point of the distribution system."
          }
        },
        {
          "type": "text_section",
          "settings": {
            "section_title": "Benefits of Laundry to Landscape Systems",
            "section_content": "<p>L2L systems offer numerous environmental and economic advantages for homeowners.</p>"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "Saves 15-40 gallons of water per load (average household: 300 loads/year = 10,000+ gallons saved)"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "No permit required in many jurisdictions (check local codes)"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "Relatively inexpensive to install ($150-$300 DIY, $700-$2,000 professional)"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "No electricity required - uses washing machine's pump"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "No filters to clean or maintain"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "Waters drought-tolerant plants and trees year-round"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "Reduces strain on septic systems"
          }
        },
        {
          "type": "benefit_item",
          "settings": {
            "benefit_text": "Provides nutrients to plants from biodegradable detergents"
          }
        },
        {
          "type": "full_width_image",
          "settings": {
            "overlay_text": "Professional Installation Process"
          }
        },
        {
          "type": "text_section",
          "settings": {
            "section_title": "Installation Overview",
            "section_content": "<p>Follow these steps to install your L2L greywater system properly.</p>"
          }
        },
        {
          "type": "installation_step",
          "settings": {
            "step_title": "Assess Your Site",
            "step_description": "Determine if your washing machine is on an exterior wall, identify plants to irrigate, and calculate the fall (slope) from the washing machine to irrigation areas. The system works best with at least 2 feet of fall."
          }
        },
        {
          "type": "installation_step",
          "settings": {
            "step_title": "Install 3-Way Valve",
            "step_description": "Cut into the washing machine drain line and install a 3-way diverter valve. This should be easily accessible for switching between landscape and sewer modes."
          }
        },
        {
          "type": "installation_step",
          "settings": {
            "step_title": "Run Distribution Lines",
            "step_description": "Connect 1-inch tubing from the valve to your landscape. Use tee fittings to split flow to multiple areas. Ensure proper slope (2% minimum) for gravity flow."
          }
        },
        {
          "type": "installation_step",
          "settings": {
            "step_title": "Create Mulch Basins",
            "step_description": "Dig shallow basins around plants (6-12 inches deep), fill with wood chip mulch, and insert outlet tubes. Cover outlets with valve boxes or stepping stones for protection."
          }
        },
        {
          "type": "installation_step",
          "settings": {
            "step_title": "Test System",
            "step_description": "Run a load of laundry with the valve directed to landscape. Check for proper flow to all outlets and adjust as needed. Monitor for the first few wash cycles."
          }
        },
        {
          "type": "image_with_text",
          "settings": {
            "layout": "image-left",
            "title": "System in Action",
            "content": "<p>See how a properly installed L2L system distributes water throughout your landscape, keeping your plants healthy while conserving precious water resources.</p>",
            "button_text": "View Gallery",
            "button_link": "#gallery"
          }
        },
        {
          "type": "text_section",
          "settings": {
            "section_title": "Suitable Plants",
            "section_content": "<p>Choose the right plants to thrive with greywater irrigation.</p>"
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🍊",
            "title": "Fruit Trees",
            "description": "Citrus, stone fruits, apples, pears - established trees thrive with greywater irrigation"
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🌳",
            "title": "Ornamental Trees",
            "description": "Shade trees, flowering trees, and larger shrubs benefit from deep watering"
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🫐",
            "title": "Berry Bushes",
            "description": "Blackberries, raspberries, and other cane berries (avoid root vegetables)"
          }
        },
        {
          "type": "component_card",
          "settings": {
            "icon": "🌹",
            "title": "Ornamental Plants",
            "description": "Roses, lavender, rosemary, and other drought-tolerant perennials"
          }
        },
        {
          "type": "text_section",
          "settings": {
            "section_title": "⚠️ Maintenance & Best Practices",
            "section_content": "<p><strong>Keep your system running smoothly with these important guidelines:</strong></p><ul><li>Use plant-friendly, biodegradable detergents (avoid sodium, boron, and chlorine bleach)</li><li>Divert to sewer when washing diapers or heavily soiled items</li><li>Clean lint from washing machine regularly</li><li>Refresh mulch basins annually</li><li>Rotate irrigation areas if possible to prevent salt buildup</li><li>Monitor plant health - yellowing leaves may indicate salt accumulation</li><li>Keep a log of system use and any issues for troubleshooting</li></ul>"
          }
        },
        {
          "type": "text_section",
          "settings": {
            "section_title": "Legal Considerations",
            "section_content": "<p>Regulations vary by location. In California, L2L systems don't require permits if they follow state guidelines: no pooling, no runoff, no human contact, and appropriate setbacks from property lines and foundations. Always check your local codes before installation.</p>"
          }
        },
        {
          "type": "image_gallery",
          "settings": {
            "gallery_title": "Installation Examples",
            "columns": "3"
          }
        },
        {
          "type": "cta_section",
          "settings": {
            "cta_title": "Ready to Save Water and Money?",
            "cta_description": "Join thousands of homeowners who have installed laundry to landscape systems",
            "cta_button_text": "Get Installation Support",
            "cta_button_link": "/pages/contact",
            "cta_background": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
          }
        }
      ]
    }
  ]
}
{% endschema %}